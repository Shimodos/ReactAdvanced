"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[150],{5150:(e,n,a)=>{a.r(n),a.d(n,{default:()=>Y});var r,t=a(5893),o=a(4611),l=a(8841),i=a(7168),c=(0,i.hg)("profile/fetchByIdStatus",(function(e,n){return a=void 0,r=void 0,o=function(){var a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(l){switch(l.label){case 0:a=n.extra,r=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("/profile/".concat(e))];case 2:if(!(t=l.sent()).data)throw new Error("No data");return[2,t.data];case 3:return o=l.sent(),console.log("Error: ",o),[2,r("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{c(o.next(e))}catch(e){n(e)}}function i(e){try{c(o.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}c((o=o.apply(a,r||[])).next())}));var a,r,t,o}));!function(e){e.INCORRECT_USER_DATA="Incorrect user data",e.INCORRECT_AGE="Age is required",e.INCORRECT_COUNTRY="Country is required",e.NO_DATA="No data",e.SERVER_ERROR="Server error"}(r||(r={}));var u=function(e){var n;return(null===(n=e.profile)||void 0===n?void 0:n.form)||{}},s=(0,i.hg)("profile/updateProfileData",(function(e,n){return a=void 0,t=void 0,l=function(){var e,a,t,o,l,i,c;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(c){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,c])}}}(this,(function(s){switch(s.label){case 0:if(e=n.extra,a=n.rejectWithValue,t=n.getState,o=u(t()),(l=function(e){if(!e)return[r.NO_DATA];var n=e.first,a=e.lastname,t=e.age,o=e.country,l=[];return n||l.push(r.INCORRECT_USER_DATA),a||l.push(r.INCORRECT_USER_DATA),t&&Number.isInteger(t)||l.push(r.INCORRECT_AGE),o||l.push(r.INCORRECT_COUNTRY),l}(o)).length)return[2,a(l)];s.label=1;case 1:return s.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(o.id),o)];case 2:if(!(i=s.sent()).data)throw new Error("No data");return[2,i.data];case 3:return c=s.sent(),console.log("Error: ",c),[2,a([r.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{c(l.next(e))}catch(e){n(e)}}function i(e){try{c(l.throw(e))}catch(e){n(e)}}function c(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}c((l=l.apply(a,t||[])).next())}));var a,t,o,l})),d=function(){return d=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},d.apply(this,arguments)},f=(0,i.oM)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.validateError=void 0,e.form=e.data},updataProfile:function(e,n){e.form=d(d({},e.form),n.payload)}},extraReducers:function(e){e.addCase(c.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(c.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(c.rejected,(function(e,n){e.error=n.payload,e.isLoading=!1})).addCase(s.pending,(function(e){e.validateError=void 0,e.isLoading=!0})).addCase(s.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateError=void 0})).addCase(s.rejected,(function(e,n){e.isLoading=!1,e.validateError=n.payload}))}}),v=f.actions,p=f.reducer;const h={ProfileCard:"wW9jgKKD",input:"ZTyX8_n9",loafing:"MvyBembj",error:"i5YK3SSb",avatarWrapper:"bEFNSahN",editing:"DjTe7269"};var y,m=a(2327),g=a(4809),C=a(6925),N=a(4002),b=a(71);!function(e){e.USD="USD",e.EUR="EUR",e.UAH="UAH"}(y||(y={}));var j,x=a(7294),R=function(){return R=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},R.apply(this,arguments)},E=function(e){var n=e.className,a=e.label,r=e.options,l=e.value,i=e.onChange,c=e.readonly,u=(0,x.useMemo)((function(){return(null==r?void 0:r.map((function(e){return(0,t.jsx)("option",R({className:"JkXz98qY",value:e.value},{children:e.constent}),e.value)})))||[]}),[r]);return(0,t.jsxs)("div",R({className:(0,o.A)("cidfdn6H",{},[n])},{children:[a&&(0,t.jsx)("span",R({className:"YIa94ivL"},{children:"".concat(a,">")})),(0,t.jsx)("select",R({className:"VOKOuKGo",value:l,onChange:function(e){null==i||i(e.target.value)},disabled:c},{children:u}))]}))},O=(0,x.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,l=e.readonly,i=(0,m.$)().t,c=[{value:y.EUR,constent:"EUR"},{value:y.USD,constent:"USD"},{value:y.UAH,constent:"UAH"}],u=(0,x.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(E,{className:(0,o.A)("",{},[n]),label:i("Currency"),options:c,value:a,onChange:u,readonly:l})}));O.displayName="CurrencySelect",function(e){e.Ukraine="Ukraine",e.USA="USA",e.Germany="Germany",e.France="France",e.Spain="Spain"}(j||(j={}));var A=(0,x.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,l=e.readonly,i=(0,m.$)().t,c=[{value:j.France,constent:"FR"},{value:j.Germany,constent:"DE"},{value:j.Spain,constent:"ES"},{value:j.USA,constent:"US"},{value:j.Ukraine,constent:"UA"}],u=(0,x.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(E,{className:(0,o.A)("",{},[n]),label:i("Country"),options:c,value:a,onChange:u,readonly:l})}));A.displayName="CurrencySelect";var w=function(){return w=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},w.apply(this,arguments)},U=function(e){var n,a,r,l=e.className,i=e.data,c=e.error,u=e.isLoading,s=e.onChangeFirstName,d=e.onChangeLastName,f=e.readonly,v=e.onChangeAge,p=e.onChangeCity,y=e.onChangeUsername,j=e.onChangeAvatar,x=e.onChangeCurrency,R=e.onChangeCountry,E=(0,m.$)("profile").t;if(u)return(0,t.jsx)("div",w({className:(0,o.A)(h.ProfileCard,(n={},n[h.loafing]=!0,n),[l])},{children:(0,t.jsx)(N.a,{})}));if(c)return(0,t.jsx)("div",w({className:(0,o.A)(h.ProfileCard,(a={},a[h.error]=!0,a),[l])},{children:(0,t.jsx)(g.xv,{theme:g.d9.ERROR,title:E("Error"),text:E("Reload"),align:g.vR.CENTER})}));var U=((r={})[h.editing]=!f,r);return(0,t.jsx)("div",w({className:(0,o.A)(h.ProfileCard,U,[l])},{children:(0,t.jsxs)("div",w({className:h.data},{children:[(null==i?void 0:i.avatar)&&(0,t.jsx)("div",w({className:h.avatarWrapper},{children:(0,t.jsx)(b.q,{src:null==i?void 0:i.avatar,alt:null==i?void 0:i.username,className:h.avatar})})),(0,t.jsx)(C.I,{value:null==i?void 0:i.first,placeholder:E("First name"),className:h.input,onChange:s,readonly:f}),(0,t.jsx)(C.I,{value:null==i?void 0:i.lastname,placeholder:E("Last name"),className:h.input,onChange:d,readonly:f}),(0,t.jsx)(C.I,{value:null==i?void 0:i.age,placeholder:E("Age"),className:h.input,onChange:v,readonly:f}),(0,t.jsx)(C.I,{value:null==i?void 0:i.city,placeholder:E("City"),className:h.input,onChange:p,readonly:f}),(0,t.jsx)(C.I,{value:null==i?void 0:i.username,placeholder:E("Username"),className:h.input,onChange:y,readonly:f}),(0,t.jsx)(C.I,{value:null==i?void 0:i.avatar,placeholder:E("Avatar"),className:h.input,onChange:j,readonly:f}),(0,t.jsx)(O,{className:h.input,value:null==i?void 0:i.currency,onChange:x,readonly:f}),(0,t.jsx)(A,{className:h.input,value:null==i?void 0:i.country,onChange:R,readonly:f})]}))}))},S=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.data},P=function(e){var n;return(null===(n=e.profile)||void 0===n?void 0:n.isLoading)||!1},T=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},I=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},k=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateError},_=a(5461),L=a(9704);const F={ProfilePageHeaders:"IjcCrPjF",editBtn:"QosjnhFj",btnsWrapper:"Q6kaOAtM"};var D=a(9161),M=a(1954),G=function(){return G=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},G.apply(this,arguments)},H=function(e){var n=e.className,a=(0,m.$)("profile").t,r=(0,L.v9)(M.m5),l=(0,L.v9)(S),i=(null==r?void 0:r.id)===(null==l?void 0:l.id),c=(0,L.v9)(I),u=(0,_.T)(),d=(0,x.useCallback)((function(){u(v.setReadonly(!1))}),[u]),f=(0,x.useCallback)((function(){u(v.cancelEdit())}),[u]),p=(0,x.useCallback)((function(){u(s())}),[u]);return(0,t.jsxs)("div",G({className:(0,o.A)(F.ProfilePageHeaders,{},[n])},{children:[(0,t.jsx)(g.xv,{title:a("ProfilePage")}),i&&(0,t.jsx)("div",G({className:F.btnsWrapper},{children:c?(0,t.jsx)(D.zx,G({className:F.editBtn,theme:D.UH.OUTLINE,onClick:d},{children:a("Edit")})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.zx,G({className:F.editBtn,theme:D.UH.OUTLINE_RED,onClick:f},{children:a("Cancel")})),(0,t.jsx)(D.zx,G({className:F.saveBtn,theme:D.UH.OUTLINE,onClick:p},{children:a("Save")}))]})}))]}))},z=a(2276),B=a(6974),q=a(5182),V=function(){return V=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},V.apply(this,arguments)},W={profile:p};const Y=function(e){var n,a=e.className,i=(0,m.$)().t,s=(0,_.T)(),d=(0,L.v9)(u),f=(0,L.v9)(P),p=(0,L.v9)(T),h=(0,L.v9)(I),y=(0,L.v9)(k),C=(0,B.UO)().id,N=((n={})[r.INCORRECT_USER_DATA]=i("Incorrect user data"),n[r.INCORRECT_AGE]=i("Age is required"),n[r.INCORRECT_COUNTRY]=i("Country is required"),n[r.NO_DATA]=i("No data"),n[r.SERVER_ERROR]=i("Server error"),n);(0,z.Q)((function(){C&&s(c(C))}));var b=(0,x.useCallback)((function(e){s(v.updataProfile({first:e||""}))}),[s]),j=(0,x.useCallback)((function(e){s(v.updataProfile({lastname:e||""}))}),[s]),R=(0,x.useCallback)((function(e){!isNaN(Number(e))&&/^\d*$/.test(e||"")&&s(v.updataProfile({age:Number(e||0)}))}),[s]),E=(0,x.useCallback)((function(e){s(v.updataProfile({city:e||""}))}),[s]),O=(0,x.useCallback)((function(e){s(v.updataProfile({username:e||""}))}),[s]),A=(0,x.useCallback)((function(e){s(v.updataProfile({avatar:e||""}))}),[s]),w=(0,x.useCallback)((function(e){s(v.updataProfile({currency:e}))}),[s]),S=(0,x.useCallback)((function(e){s(v.updataProfile({country:e}))}),[s]);return(0,t.jsx)(l.t,V({reducers:W,remmoveAfterUnmount:!0},{children:(0,t.jsxs)(q.T,V({className:(0,o.A)("",{},[a])},{children:[(0,t.jsx)(H,{}),(null==y?void 0:y.length)&&(null==y?void 0:y.map((function(e,n){return(0,t.jsx)(g.xv,{theme:g.d9.ERROR,text:N[e]},n)}))),(0,t.jsx)(U,{data:d,className:a,isLoading:f,error:p,onChangeFirstName:b,onChangeLastName:j,onChangeAge:R,onChangeCity:E,onChangeUsername:O,onChangeAvatar:A,onChangeCurrency:w,onChangeCountry:S,readonly:h})]}))}))}},8841:(e,n,a)=>{a.d(n,{t:()=>l});var r=a(5893),t=a(7294),o=a(9704),l=function(e){var n=e.children,a=e.reducers,l=e.remmoveAfterUnmount,i=void 0===l||l,c=(0,o.I0)(),u=(0,o.oR)();return(0,t.useEffect)((function(){var e=u.reducerManager.getMountedReducers();return Object.entries(a).forEach((function(n){var a=n[0],r=n[1];e[a]||(u.reducerManager.add(a,r),c({type:"@INIT ".concat(a," reducer")}))})),function(){i&&Object.entries(a).forEach((function(e){var n=e[0];e[1],u.reducerManager.remove(n),c({type:"@DESTROU ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}},71:(e,n,a)=>{a.d(n,{q:()=>l});var r=a(5893),t=a(4611);var o=a(7294),l=function(e){var n=e.className,a=e.src,l=e.alt,i=e.size,c=(0,o.useMemo)((function(){return{width:i||100,height:i||100}}),[i]);return(0,r.jsx)("img",{src:a,alt:l,style:c,className:(0,t.A)("ZqPdwJxd",{},[n])})}},6925:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(5893),t=a(4611);var o=a(7294),l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n,a=e.className,i=e.value,c=e.onChange,u=e.type,s=void 0===u?"text":u,d=e.placeholder,f=e.autofocus,v=e.readonly,p=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),h=(0,o.useRef)(null),y=(0,o.useState)(!1),m=y[0],g=y[1],C=(0,o.useState)(0),N=C[0],b=C[1];(0,o.useEffect)((function(){var e;f&&(g(!0),null===(e=h.current)||void 0===e||e.focus())}),[f]);var j=((n={}).fTN1PnWu=v,n);return(0,r.jsxs)("div",l({className:(0,t.A)("LuFDUWoP",j,[a])},{children:[d&&(0,r.jsx)("div",l({className:"emAQQ85i"},{children:d})),(0,r.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",l({ref:h,type:s,value:i,onChange:function(e){null==c||c(e.target.value),b(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){g(!0)},onBlur:function(){g(!1)},onSelect:function(e){var n=e.target;b(n.selectionStart||0)},readOnly:v},p)),m&&(0,r.jsx)("div",{className:"lqMFGBuL",style:{left:"".concat(N,"ch")}})]}))]}))}));i.displayName="Input"},4809:(e,n,a)=>{a.d(n,{vR:()=>c,xv:()=>d,yH:()=>u,d9:()=>i});var r=a(5893),t=a(7294),o=a(4611);const l={title:"ikI7VPeL",text:"uNJeeCm1",error:"F9oLXAK4",left:"dBqPIG8f",center:"iJw6m2iu",right:"j4UBrvei",size_m:"AOVZBfas",size_l:"U6JpO11Q"};var i,c,u,s=function(){return s=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},s.apply(this,arguments)};!function(e){e.PRIMARY="primary",e.ERROR="error"}(i||(i={})),function(e){e.LEFT="left",e.CENTER="center",e.RIGHT="right"}(c||(c={})),function(e){e.S="size_s",e.M="size_m",e.L="size_l"}(u||(u={}));var d=(0,t.memo)((function(e){var n,a=e.className,t=e.title,d=e.text,f=e.theme,v=void 0===f?i.PRIMARY:f,p=e.align,h=void 0===p?c.LEFT:p,y=e.size,m=void 0===y?u.M:y,g=((n={})[l[h]]=!0,n[l[v]]=!0,n[l[m]]=!0,n);return(0,r.jsxs)("div",s({className:(0,o.A)(l.Text,g,[a])},{children:[t&&(0,r.jsx)("p",s({className:l.title},{children:t})),d&&(0,r.jsx)("p",s({className:l.text},{children:d}))]}))}));d.displayName="Text"}}]);