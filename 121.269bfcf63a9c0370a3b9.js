"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[121],{2121:function(e,n,a){a.r(n),a.d(n,{default:function(){return Q}});var r,t=a(4848),o=a(7101),l=a(895),i=a(7228),u=a(6142),c=a(1468),s=a(6540),d=a(9630),f=a(1469),p=a(327),v=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.data},h=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},y=a(6204),m=(0,y.zD)("profile/fetchByIdStatus",(function(e,n){return a=void 0,r=void 0,o=function(){var a,r,t,o;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(l){switch(l.label){case 0:a=n.extra,r=n.rejectWithValue,l.label=1;case 1:return l.trys.push([1,3,,4]),[4,a.api.get("/profile/".concat(e))];case 2:if(!(t=l.sent()).data)throw new Error("No data");return[2,t.data];case 3:return o=l.sent(),console.log("Error: ",o),[2,r("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{u(o.next(e))}catch(e){n(e)}}function i(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}u((o=o.apply(a,r||[])).next())}));var a,r,t,o}));!function(e){e.INCORRECT_USER_DATA="Incorrect user data",e.INCORRECT_AGE="Age is required",e.INCORRECT_COUNTRY="Country is required",e.NO_DATA="No data",e.SERVER_ERROR="Server error"}(r||(r={}));var g,C=function(e){var n;return(null===(n=e.profile)||void 0===n?void 0:n.form)||{}},b=(0,y.zD)("profile/updateProfileData",(function(e,n){return a=void 0,t=void 0,l=function(){var e,a,t,o,l,i,u;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(c){switch(c.label){case 0:if(e=n.extra,a=n.rejectWithValue,t=n.getState,o=C(t()),(l=function(e){if(!e)return[r.NO_DATA];var n=e.first,a=e.lastname,t=e.age,o=e.country,l=[];return n||l.push(r.INCORRECT_USER_DATA),a||l.push(r.INCORRECT_USER_DATA),t&&Number.isInteger(t)||l.push(r.INCORRECT_AGE),o||l.push(r.INCORRECT_COUNTRY),l}(o)).length)return[2,a(l)];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e.api.put("/profile/".concat(o.id),o)];case 2:if(!(i=c.sent()).data)throw new Error("No data");return[2,i.data];case 3:return u=c.sent(),console.log("Error: ",u),[2,a([r.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{u(l.next(e))}catch(e){n(e)}}function i(e){try{u(l.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}u((l=l.apply(a,t||[])).next())}));var a,t,o,l})),x=function(){return x=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},x.apply(this,arguments)},N=(0,y.Z0)({name:"profile",initialState:{readonly:!0,isLoading:!1,error:void 0,data:void 0},reducers:{setReadonly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.validateError=void 0,e.form=e.data},updataProfile:function(e,n){e.form=x(x({},e.form),n.payload)}},extraReducers:function(e){e.addCase(m.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(m.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(m.rejected,(function(e,n){e.error=n.payload,e.isLoading=!1})).addCase(b.pending,(function(e){e.validateError=void 0,e.isLoading=!0})).addCase(b.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0,e.validateError=void 0})).addCase(b.rejected,(function(e,n){e.isLoading=!1,e.validateError=n.payload}))}}),j=N.actions,E=N.reducer,R=function(){return R=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},R.apply(this,arguments)},O=function(e){var n=e.className,a=(0,u.B)("profile").t,r=(0,c.d4)(f.ed),y=(0,c.d4)(v),m=(null==r?void 0:r.id)===(null==y?void 0:y.id),g=(0,c.d4)(h),C=(0,d.j)(),x=(0,s.useCallback)((function(){C(j.setReadonly(!1))}),[C]),N=(0,s.useCallback)((function(){C(j.cancelEdit())}),[C]),E=(0,s.useCallback)((function(){C(b())}),[C]);return(0,t.jsxs)(p.z,R({max:!0,justify:"between",className:(0,o.x)("",{},[n])},{children:[(0,t.jsx)(i.EY,{title:a("ProfilePage")}),m&&(0,t.jsx)(p.z,R({gap:"16"},{children:g?(0,t.jsx)(l.$n,R({theme:l.oy.OUTLINE,onClick:x},{children:a("Edit")})):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.$n,R({theme:l.oy.OUTLINE_RED,onClick:N},{children:a("Cancel")})),(0,t.jsx)(l.$n,R({theme:l.oy.OUTLINE,onClick:E},{children:a("Save")}))]})}))]}))},w=a(8679),S=a(3359),A=a(9138),U=function(e){var n;return(null===(n=e.profile)||void 0===n?void 0:n.isLoading)||!1},P=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},T=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateError},k={ProfileCard:"wW9jgKKD",loafing:"MvyBembj",error:"i5YK3SSb",editing:"DjTe7269"},_=a(3729),I=a(7028),D=a(4346);!function(e){e.USD="USD",e.EUR="EUR",e.UAH="UAH"}(g||(g={}));var L,F=a(8145),B=(0,s.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,l=e.readonly,i=(0,u.B)().t,c=[{value:g.EUR,content:"EUR"},{value:g.USD,content:"USD"},{value:g.UAH,content:"UAH"}],d=(0,s.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(F.qF,{className:(0,o.x)("",{},[n]),defaultValue:i("Currency"),value:a,onChange:d,items:c,readonly:l,label:i("Currency"),direction:"up right"})}));B.displayName="CurrencySelect",function(e){e.Ukraine="Ukraine",e.USA="USA",e.Germany="Germany",e.France="France",e.Spain="Spain"}(L||(L={}));var G=(0,s.memo)((function(e){var n=e.className,a=e.value,r=e.onChange,l=e.readonly,i=(0,u.B)().t,c=[{value:L.France,content:"FR"},{value:L.Germany,content:"DE"},{value:L.Spain,content:"ES"},{value:L.USA,content:"US"},{value:L.Ukraine,content:"UA"}],d=(0,s.useCallback)((function(e){null==r||r(e)}),[r]);return(0,t.jsx)(F.qF,{className:(0,o.x)("",{},[n]),defaultValue:i("Country"),value:a,onChange:d,items:c,readonly:l,label:i("Country"),direction:"up right"})}));G.displayName="CurrencySelect";var V=a(628),Y=function(){return Y=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},Y.apply(this,arguments)},q=function(e){var n,a,r,l=e.className,c=e.data,s=e.error,d=e.isLoading,f=e.onChangeFirstName,p=e.onChangeLastName,v=e.readonly,h=e.onChangeAge,y=e.onChangeCity,m=e.onChangeUsername,g=e.onChangeAvatar,C=e.onChangeCurrency,b=e.onChangeCountry,x=(0,u.B)("profile").t;if(d)return(0,t.jsx)(V.z,Y({justify:"center",max:!0,className:(0,o.x)(k.ProfileCard,(n={},n[k.loafing]=!0,n),[l])},{children:(0,t.jsx)(I.a,{})}));if(s)return(0,t.jsx)(V.z,Y({justify:"center",max:!0,className:(0,o.x)(k.ProfileCard,(a={},a[k.error]=!0,a),[l])},{children:(0,t.jsx)(i.EY,{theme:i.Pt.ERROR,title:x("Error"),text:x("Reload"),align:i.vJ.CENTER})}));var N=((r={})[k.editing]=!v,r);return(0,t.jsxs)(V.T,Y({gap:"8",max:!0,className:(0,o.x)(k.ProfileCard,N,[l])},{children:[(null==c?void 0:c.avatar)&&(0,t.jsx)(V.z,Y({justify:"center",max:!0,className:k.avatarWrapper},{children:(0,t.jsx)(D.e,{src:null==c?void 0:c.avatar,alt:null==c?void 0:c.username,className:k.avatar})})),(0,t.jsx)(_.p,{value:null==c?void 0:c.first,placeholder:x("First name"),className:k.input,onChange:f,readonly:v}),(0,t.jsx)(_.p,{value:null==c?void 0:c.lastname,placeholder:x("Last name"),className:k.input,onChange:p,readonly:v}),(0,t.jsx)(_.p,{value:null==c?void 0:c.age,placeholder:x("Age"),className:k.input,onChange:h,readonly:v}),(0,t.jsx)(_.p,{value:null==c?void 0:c.city,placeholder:x("City"),className:k.input,onChange:y,readonly:v}),(0,t.jsx)(_.p,{value:null==c?void 0:c.username,placeholder:x("Username"),className:k.input,onChange:m,readonly:v}),(0,t.jsx)(_.p,{value:null==c?void 0:c.avatar,placeholder:x("Avatar"),className:k.input,onChange:g,readonly:v}),(0,t.jsx)(B,{className:k.input,value:null==c?void 0:c.currency,onChange:C,readonly:v}),(0,t.jsx)(G,{className:k.input,value:null==c?void 0:c.country,onChange:b,readonly:v})]}))},z=a(8618),M=function(){return M=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},M.apply(this,arguments)},W={profile:E},H=(0,s.memo)((function(e){var n,a=e.className,l=e.id,f=(0,u.B)().t,p=(0,d.j)(),v=(0,c.d4)(C),y=(0,c.d4)(U),g=(0,c.d4)(P),b=(0,c.d4)(h),x=(0,c.d4)(T),N=((n={})[r.INCORRECT_USER_DATA]=f("Incorrect user data"),n[r.INCORRECT_AGE]=f("Age is required"),n[r.INCORRECT_COUNTRY]=f("Country is required"),n[r.NO_DATA]=f("No data"),n[r.SERVER_ERROR]=f("Server error"),n);(0,A.b)((function(){l&&p(m(l))}));var E=(0,s.useCallback)((function(e){p(j.updataProfile({first:e||""}))}),[p]),R=(0,s.useCallback)((function(e){p(j.updataProfile({lastname:e||""}))}),[p]),O=(0,s.useCallback)((function(e){!isNaN(Number(e))&&/^\d*$/.test(e||"")&&p(j.updataProfile({age:Number(e||0)}))}),[p]),w=(0,s.useCallback)((function(e){p(j.updataProfile({city:e||""}))}),[p]),S=(0,s.useCallback)((function(e){p(j.updataProfile({username:e||""}))}),[p]),k=(0,s.useCallback)((function(e){p(j.updataProfile({avatar:e||""}))}),[p]),_=(0,s.useCallback)((function(e){p(j.updataProfile({currency:e}))}),[p]),I=(0,s.useCallback)((function(e){p(j.updataProfile({country:e}))}),[p]);return(0,t.jsx)(z.s,M({reducers:W,remmoveAfterUnmount:!1},{children:(0,t.jsxs)("div",M({className:(0,o.x)("ATDZVNy_",{},[a])},{children:[(null==x?void 0:x.length)&&(null==x?void 0:x.map((function(e,n){return(0,t.jsx)(i.EY,{theme:i.Pt.ERROR,text:N[e]},n)}))),(0,t.jsx)(q,{data:v,className:a,isLoading:y,error:g,onChangeFirstName:E,onChangeLastName:R,onChangeAge:O,onChangeCity:w,onChangeUsername:S,onChangeAvatar:k,onChangeCurrency:_,onChangeCountry:I,readonly:b})]}))}))}));H.displayName="EditableProfileCard";var $=a(8106),K=function(){return K=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},K.apply(this,arguments)},Q=function(e){var n=e.className,a=(0,u.B)().t,r=(0,$.g)().id;return r?(0,t.jsx)(w.Y,K({className:(0,o.x)("",{},[n])},{children:(0,t.jsxs)(S.T,K({gap:"8",max:!0},{children:[(0,t.jsx)(O,{}),(0,t.jsx)(H,{className:n,id:r})]}))})):(0,t.jsx)(i.EY,{text:a("UserNotFound")})}},3729:function(e,n,a){a.d(n,{p:function(){return i}});var r=a(4848),t=a(7101),o=a(6540),l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n,a=e.className,i=e.value,u=e.onChange,c=e.type,s=void 0===c?"text":c,d=e.placeholder,f=e.autofocus,p=e.readonly,v=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),h=(0,o.useRef)(null),y=(0,o.useState)(!1),m=y[0],g=y[1],C=(0,o.useState)(0),b=C[0],x=C[1];(0,o.useEffect)((function(){var e;f&&(g(!0),null===(e=h.current)||void 0===e||e.focus())}),[f]);var N=((n={}).fTN1PnWu=p,n);return(0,r.jsxs)("div",l({className:(0,t.x)("LuFDUWoP",N,[a])},{children:[d&&(0,r.jsx)("div",l({className:"emAQQ85i"},{children:d})),(0,r.jsxs)("div",l({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",l({ref:h,type:s,value:i,onChange:function(e){null==u||u(e.target.value),x(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){g(!0)},onBlur:function(){g(!1)},onSelect:function(e){var n=e.target;x(n.selectionStart||0)},readOnly:p},v)),m&&(0,r.jsx)("div",{className:"lqMFGBuL",style:{left:"".concat(b,"ch")}})]}))]}))}));i.displayName="Input"},8618:function(e,n,a){a.d(n,{s:function(){return l}});var r=a(4848),t=a(6540),o=a(1468),l=function(e){var n=e.children,a=e.reducers,l=e.remmoveAfterUnmount,i=void 0===l||l,u=(0,o.wA)(),c=(0,o.Pj)();return(0,t.useEffect)((function(){var e=c.reducerManager.getMountedReducers();return Object.entries(a).forEach((function(n){var a=n[0],r=n[1];e[a]||(c.reducerManager.add(a,r),u({type:"@INIT ".concat(a," reducer")}))})),function(){i&&Object.entries(a).forEach((function(e){var n=e[0];e[1],c.reducerManager.remove(n),u({type:"@DESTROU ".concat(n," reducer")})}))}}),[]),(0,r.jsx)(r.Fragment,{children:n})}}}]);