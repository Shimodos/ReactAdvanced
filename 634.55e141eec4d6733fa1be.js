"use strict";(self.webpackChunkproduction_project=self.webpackChunkproduction_project||[]).push([[634],{2093:function(e,n,t){t.d(n,{K:function(){return y}});var r=t(4848),a=t(7101),l={},c=t(5624),i=t(628),o=t(7228),s=t(2805),u=t(6540),d=t(9195),f=t(3729),h=t(6142),p=t(895),v=t(159),g=t(3293),j=function(){return j=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},j.apply(this,arguments)},y=function(e){var n=e.className,t=e.title,y=(e.feedbackTitle,e.hasFeedback),x=e.onCancel,m=e.onAccept,b=e.rate,O=void 0===b?0:b,k=(0,h.B)().t,C=(0,u.useState)(!1),S=C[0],N=C[1],w=(0,u.useState)(O),I=w[0],L=w[1],E=(0,u.useState)(""),P=E[0],A=E[1],T=(0,u.useCallback)((function(e){L(e),y?N(!0):null==m||m(e),N(!0)}),[y,m]),F=(0,u.useCallback)((function(){N(!1),null==m||m(I,P)}),[P,m,I]),R=(0,u.useCallback)((function(){N(!1),null==x||x(I)}),[x,I]),z=(0,r.jsxs)(i.T,j({gap:"16",align:"center",justify:"center"},{children:[(0,r.jsx)(o.EY,{title:I?k("ratingTitle"):t}),(0,r.jsx)(f.p,{placeholder:k("Your feedback"),value:P,onChange:A}),(0,r.jsxs)(i.z,j({max:!0,gap:"16",justify:"end"},{children:[(0,r.jsx)(p.$n,j({theme:p.oy.OUTLINE_RED,onClick:R},{children:k("Cancel")})),(0,r.jsx)(p.$n,j({onClick:F},{children:k("Send")}))]}))]}));return(0,r.jsx)(c.Z,j({className:(0,a.x)(l.RatingCard,{},[n])},{children:(0,r.jsxs)(i.T,j({gap:"8",align:"center",justify:"center"},{children:[(0,r.jsx)(o.EY,{title:I?k("ratingTitle"):t}),(0,r.jsx)(s.F,{selectedStars:I,size:30,onSelect:T}),(0,r.jsx)(v.S7,{children:(0,r.jsx)(d.a,j({isOpen:S,lazy:!0,onClose:function(){N(!1)}},{children:z}))}),(0,r.jsx)(v.IM,{children:(0,r.jsx)(g._,j({isOpen:S,lazy:!0,onClose:R},{children:z}))})]}))}))}},2634:function(e,n,t){t.r(n),t.d(n,{default:function(){return h}});var r=t(4848),a=t(2093),l=t(6142),c=t(3888).q.injectEndpoints({endpoints:function(e){return{getArticleRating:e.query({query:function(e){return{url:"/article-ratings",params:{userId:e.userId,articleId:e.articleId}}}}),rateArticle:e.mutation({query:function(e){return{url:"/article-ratings",method:"POST",body:e}}})}}}),i=c.useGetArticleRatingQuery,o=c.useRateArticleMutation,s=t(1468),u=t(1469),d=t(4270),f=t(6540),h=function(e){var n,t=e.className,c=e.articleId,h=(0,l.B)().t,p=(0,s.d4)(u.ed),v=i({userId:null!==(n=null==p?void 0:p.id)&&void 0!==n?n:"",articleId:c}),g=v.data,j=v.isLoading,y=o()[0],x=(0,f.useCallback)((function(e,n){var t;try{y({userId:null!==(t=null==p?void 0:p.id)&&void 0!==t?t:"",articleId:c,rate:e,feedback:n})}catch(e){console.log(e)}}),[c,y,null==p?void 0:p.id]),m=(0,f.useCallback)((function(e){e&&x(e),x(0)}),[x]),b=(0,f.useCallback)((function(e,n){x(e,n)}),[x]);if(j)return(0,r.jsx)(d.E,{width:"100%",height:120,border:"8px"});var O=null==g?void 0:g[0];return(0,r.jsx)(a.K,{onAccept:b,onCancel:m,rate:null==O?void 0:O.rate,className:t,title:h("Оцените статью"),feedbackTitle:h("Оставьте свой отзыв"),hasFeedback:!0})}},2805:function(e,n,t){t.d(n,{F:function(){return h}});var r,a=t(4848),l=t(7101),c={StarRaiting:"K63UCxWo",starIcon:"G5aAitnd",normal:"X8xSNKZZ",hovered:"LBV5xg_4",selected:"DWkzpcgk"},i=t(6540);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},o.apply(null,arguments)}var s=e=>i.createElement("svg",o({width:24,height:22,fill:"none",xmlns:"http://www.w3.org/2000/svg"},e),r||(r=i.createElement("path",{d:"M11.075 1.633c.32-.844 1.53-.844 1.852 0l2.07 5.734a.99.99 0 0 0 .926.633h5.087c.94 0 1.35 1.17.61 1.743L18 13a.968.968 0 0 0-.321 1.092L19 19.695c.322.9-.72 1.673-1.508 1.119l-4.917-3.12a1 1 0 0 0-1.15 0l-4.917 3.12c-.787.554-1.83-.22-1.508-1.119l1.322-5.603A.968.968 0 0 0 6 13L2.38 9.743C1.64 9.17 2.053 8 2.99 8h5.087a.989.989 0 0 0 .926-.633l2.07-5.734h0Z",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"}))),u=t(9713),d=function(){return d=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},d.apply(this,arguments)},f=[1,2,3,4,5],h=function(e){var n=e.className,t=e.onSelect,r=e.selectedStars,o=void 0===r?0:r,h=e.size,p=void 0===h?30:h,v=(0,i.useState)(Boolean(o)),g=v[0],j=v[1],y=(0,i.useState)(0),x=y[0],m=y[1],b=function(){return function(){g||m(0)}},O=function(e){return function(){t&&t(e),m(e),j(!0)}};return(0,a.jsx)("div",d({className:(0,l.x)(c.StarRaiting,{},[n])},{children:f.map((function(e){var n,t;return(0,a.jsx)("div",d({className:c.star},{children:(0,a.jsx)(u.I,{Svg:s,className:(0,l.x)(c.starIcon,(n={},n[c.selected]=g,n),[x>=e?c.hovered:c.normal]),width:p,height:p,onMouseEnter:(t=e,function(){g||m(t)}),onMouseLeave:b,onClick:O(e)},e)}),e)}))}))}},3729:function(e,n,t){t.d(n,{p:function(){return i}});var r=t(4848),a=t(7101),l=t(6540),c=function(){return c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var a in n=arguments[t])Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a]);return e},c.apply(this,arguments)},i=(0,l.memo)((function(e){var n,t=e.className,i=e.value,o=e.onChange,s=e.type,u=void 0===s?"text":s,d=e.placeholder,f=e.autofocus,h=e.readonly,p=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)n.indexOf(r[a])<0&&Object.prototype.propertyIsEnumerable.call(e,r[a])&&(t[r[a]]=e[r[a]])}return t}(e,["className","value","onChange","type","placeholder","autofocus","readonly"]),v=(0,l.useRef)(null),g=(0,l.useState)(!1),j=g[0],y=g[1],x=(0,l.useState)(0),m=x[0],b=x[1];(0,l.useEffect)((function(){var e;f&&(y(!0),null===(e=v.current)||void 0===e||e.focus())}),[f]);var O=((n={}).fTN1PnWu=h,n);return(0,r.jsxs)("div",c({className:(0,a.x)("LuFDUWoP",O,[t])},{children:[d&&(0,r.jsx)("div",c({className:"emAQQ85i"},{children:d})),(0,r.jsxs)("div",c({className:"y1GiFC_L"},{children:[(0,r.jsx)("input",c({ref:v,type:u,value:i,onChange:function(e){null==o||o(e.target.value),b(e.target.value.length)},className:"LVdIPwcx",onFocus:function(){y(!0)},onBlur:function(){y(!1)},onSelect:function(e){var n=e.target;b(n.selectionStart||0)},readOnly:h},p)),j&&(0,r.jsx)("div",{className:"lqMFGBuL",style:{left:"".concat(m,"ch")}})]}))]}))}));i.displayName="Input"}}]);